(this["webpackJsonptable-implementation"]=this["webpackJsonptable-implementation"]||[]).push([[0],{16:function(e,t,a){e.exports=a(46)},21:function(e,t,a){},22:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),l=(a(21),a(22),a(3)),s=a.n(l),u=a(4),i=a(2),m=a(5),d=a.n(m);function f(e,t){var a=Object(n.useState)(null),r=Object(i.a)(a,2),c=r[0],o=r[1],l=function(e,t){return e+parseFloat(t.value)};function m(){return(m=Object(u.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.get(e);case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=Object(u.a)(s.a.mark((function e(a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=a)){e.next=4;break}return e.next=4,Promise.all(n.map(function(){var e=Object(u.a)(s.a.mark((function e(a){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(t+a.id);case 2:n=e.sent.data,r=n.incomes.reduce(l,0),c=r/n.incomes.length,a.totalIncome=r.toFixed(2),a.avgIncome=c.toFixed(2);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){(function(){return m.apply(this,arguments)})().then((function(e){return function(e){return f.apply(this,arguments)}(e)})).then((function(e){return o(e)})).catch((function(e){return console.log(e)}))}),[]),c}a(41),a(42),a(43);var p=function(e){return r.a.createElement("thead",null,r.a.createElement("tr",{className:"header"},e.headers.map((function(t,a){return r.a.createElement("th",{className:"header-cell center-content",onClick:function(){e.setTableSort({key:t.sortingKey,direction:1})},key:a},t.name)}))))};a(44);var g=function(e){return r.a.createElement("tbody",null,e.data.map((function(e,t){return r.a.createElement("tr",{className:"table-row",key:t},r.a.createElement("td",{className:"table-cell center-content"},e.id),r.a.createElement("td",{className:"table-cell center-content"},e.name),r.a.createElement("td",{className:"table-cell center-content"},e.city),r.a.createElement("td",{className:"table-cell center-content"},e.totalIncome),r.a.createElement("td",{className:"table-cell center-content"},e.avgIncome))})))};a(45);var b=function(e){return r.a.createElement("div",{className:"controls"},r.a.createElement("div",{className:"buttons"},r.a.createElement("div",null,r.a.createElement("button",{className:"button",onClick:function(){return e.pageChange(0)}},r.a.createElement("span",{className:"button-arrow"},"<<")),r.a.createElement("button",{className:"button",onClick:function(){return e.pageChange(e.currentPage-1)}},r.a.createElement("span",{className:"button-arrow"},"<"))),r.a.createElement("div",{className:"current-page"},e.currentPage+1," / ",e.allPages),r.a.createElement("div",null,r.a.createElement("button",{className:"button",onClick:function(){return e.pageChange(e.currentPage+1)}},r.a.createElement("span",{className:"button-arrow"},">")),r.a.createElement("button",{className:"button",onClick:function(){return e.pageChange(e.allPages)}},r.a.createElement("span",{className:"button-arrow"},">>")))),r.a.createElement("div",{className:"search-and-pages"},r.a.createElement("input",{id:"search",className:"search-input",type:"text",placeholder:"search...",onInput:function(){return e.searchChange(document.getElementById("search").value.toLowerCase())}}),r.a.createElement("select",{defaultValue:10,id:"itemsNumber",className:"items-number",onChange:e.changeItemsNumber},r.a.createElement("option",{value:5},"5 per page"),r.a.createElement("option",{value:10},"10 per page"),r.a.createElement("option",{value:15},"15 per page"))))};var h=function(e,t){var a;return e.sort((a=t,function(e,t){return e[a.key]<t[a.key]?-1*a.direction:e[a.key]>t[a.key]?1*a.direction:0}))};var E=function(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e}),[e]),t.current};var v=function(e,t){return e.key===t.key?{key:e.key,direction:-t.direction}:e};var y=function(e){var t=Object(n.useState)({key:"id",direction:1}),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(10),s=Object(i.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(0),f=Object(i.a)(d,2),y=f[0],N=f[1],k=Object(n.useState)(""),w=Object(i.a)(k,2),O=w[0],j=w[1],C=E(c),I=function(e,t,a){var r=Object(n.useState)(0),c=Object(i.a)(r,2),o=c[0],l=c[1];return Object(n.useEffect)((function(){var n=Math.ceil(a/t);l(e<0?0:e>=n?n-1:e)}),[e,t,a]),o}(y,u,e.data.length),S=function(e,t,a,r,c){var o=Object(n.useState)({data:[],allPages:30}),l=Object(i.a)(o,2),s=l[0],u=l[1];return Object(n.useEffect)((function(){var n=h(e.filter((function(e){return e.name.toLowerCase().includes(c)||e.city.toLowerCase().includes(c)||String(e.id).toLowerCase().includes(c)||String(e.totalIncome).toLowerCase().includes(c)||String(e.avgIncome).toLowerCase().includes(c)})),r),o=t*a,l=t*a+a,s=Math.ceil(n.length/a);u({data:n.slice(o,l),allPages:s})}),[e,t,a,r,c]),s}(e.data,I,u,c,O);return r.a.createElement("div",{className:"container"},r.a.createElement("table",{className:"table"},r.a.createElement(p,{headers:e.headers,setTableSort:function(e){o(v(e,C))}}),r.a.createElement(g,{data:S.data})),r.a.createElement(b,{pageChange:N,currentPage:I,allPages:S.allPages,changeItemsNumber:function(e){m(parseInt(e.target.value)),N(0)},searchChange:j}))};var N=function(){var e=f("https://recruitment.hal.skygate.io/companies","https://recruitment.hal.skygate.io/incomes/");return null===e?r.a.createElement("div",{className:"app"},"Loading..."):r.a.createElement("div",{className:"app"},r.a.createElement(y,{data:e,headers:[{name:"ID",sortingKey:"id"},{name:"NAME",sortingKey:"name"},{name:"CITY",sortingKey:"city"},{name:"TOTAL INCOME",sortingKey:"totalIncome"},{name:"AVERAGE INCOME",sortingKey:"avgIncome"}]}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.36540f6b.chunk.js.map